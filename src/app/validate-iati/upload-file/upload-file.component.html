<h4>Upload your IATI file and receive validation feedback.</h4>
<div [class.disable]="mode !== 'both' && mode === 'urls'">
  <div
    class="step"
    [class.next]="isActiveStep('1')"
  >
    <h5 class="step-title">Step 1. Select your IATI file(s).</h5>
    <div class="row">
      <section *ngIf="selectedFiles.length" class="col selected-files" >
        <p *ngFor="let file of selectedFiles" class="file-name-p">
          {{file.name}}
        </p>
      </section>
      <section class="col">
        <ng-container *ngIf="!selectedFiles.length; else clearState">
          <label class="btn btn-success iati-button border-radius-none iati-file-label" for="file-upload">
            Browse
          </label>
          <input
            id="file-upload"
            type="file"
            (change)="onFileChanged($event)"
            accept=".xml"
            [disabled]="!isActiveStep('1') || mode !== 'both' && mode === 'urls'"
            multiple
          >
        </ng-container>
        <ng-template #clearState>
          <button
            class="btn btn-success iati-button border-radius-none"
            (click)="clearFiles()"
            [disabled]="!isActiveStep('1')"
          >
            Clear
          </button>
        </ng-template>
      </section>
    </div>
  </div>

  <div
    class="step"
    [class.next]="isActiveStep('2')"
  >
    <h5 class="step-title">Step 2. Upload your IATI file(s).</h5>
    <!-- TODO: ask Rolf about it in new flow -->
    <div *ngIf="selectedFile" class="name-file">File: {{selectedFile.name}}</div>
    <button
      class="btn btn-success iati-button border-radius-none"
      (click)="UploadFile()"
      [disabled]="!isActiveStep('2')"
    >
      Upload
    </button>
    <!-- TODO: make progress bar -->
    <div *ngIf="isActiveStep('2') && uploading" class="alert alert-info message" [class.alert-danger]="message.type===9">
      <app-spinner *ngIf="uploading" [backColor]="'white'"></app-spinner>
      {{ message.message }}
      <p *ngIf="message.type===9">Please try again later.</p>
    </div>

    <div *ngIf="isActiveStep('2') && uploading">
      <h4>Progress</h4>
      <span>{{message.message}}</span>
    </div>
  </div>

  <div
    class="step"
    [class.next]="isActiveStep('3')"
  >
    <h5 class="step-title">Step 3. Start validation.</h5>
    <button
      class="btn btn-success iati-button border-radius-none"
      (click)="ValidateFile()"
      [disabled]="!isActiveStep('3')"
    >
      Validate
    </button>
    <!-- <button
      class="btn btn-success iati-button border-radius-none"
      [disabled]="!isActiveStep('3')"
    >
      Validate
  </button> -->
  </div>

</div>
