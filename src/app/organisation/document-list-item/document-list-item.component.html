<div *ngIf="document" class="wrapper">
  <div
    class="row"
    (click)="rowClick()"
    [ngClass]="{'file-success': fileStatus(false) === 'success', 
                'file-warning': fileStatus(false) === 'warning',
                'file-error': fileStatus(false) === 'error',
                'file-critical': fileStatus(false) === 'critical',
                'no-validation': fileStatus(false) === 'normal'}"
  >
    <div class="col-12 col-md filename">
      <span *ngIf="document.validation_created !== null && document.download_error=== null">
        {{ fileName() }}
      </span>
      <a *ngIf="document.download_error!== null || document.downloaded === null || document.hash === ''" href="{{document.url}}" target="_blank">{{ fileName() }}</a>
    </div>
    <div class="col-12 col-md">
      <span *ngIf="document.first_seen || document.modified">{{
        document.modified || document.first_seen | date: "yyyy-MM-dd HH:mm (z)"
      }}</span>
    </div>
    <div class="col-12 col-md">
      <span *ngIf="document.validation_created">
        {{
          ( document.validation_created ? document.validation_created : "")
            | date: "yyyy-MM-dd HH:mm (z)"
        }}
      </span>
      <span *ngIf="document.download_error=== null">
        <span *ngIf="document.downloaded === null">
          Download
        </span>
        <span *ngIf="document.validation_created === null">
          Pending
        </span>
      </span>
      <span *ngIf="document.download_error!== null">
        Download error: {{ document.download_error }}
      </span>
    </div>

    <div class="col-12 col-md">{{ fileStatus(true) }}</div>

    <div class="col-12 col-md">
      <span *ngIf="document.solrize_end">
        {{
          ( document.validation_created ? document.solrize_end : "")
            | date: "yyyy-MM-dd HH:mm (z)"
        }}
      </span>
      <span *ngIf="document.validation_created !== null && fileStatus() === 'critical'">
        Not eligible
      </span>
      <span *ngIf="document.report?.fileType === 'iati-activities' && document.solrize_end === null && fileStatus() !== 'critical'">
        Pending
      </span>
      <span *ngIf="document.report?.fileType === 'iati-organisations'">
        N/A
      </span>
    </div>

    <div class="col-12 d-md-none"><hr /></div>
  </div>
</div>
